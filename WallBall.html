<!DOCTYPE html>
<html lan="en">
	<head>
		<meta charset="utf-8">
    	<meta author="Mark Dickerson & George Katsaounis">
		<title>Ball Physics Engine</title>
		<script type="text/javascript" src="../lib/webgl-utils.js"></script>
		<script type="text/javascript" src="../lib/MV.js"></script>
		<script type="text/javascript" src="../lib/InitShaders.js"></script>
		
		
		<script type="text/javascript" src="WallBall.js">
			vertexShader = "vertex-shader-phong";
			fragmentShader = "fragment-shader-phong";
		</script>
		
	
		
		<script id="vertex-shader-phong" type="x-shader/x-vertex">
			attribute vec4 a_Position;
			attribute vec3 a_Normal;
			uniform mat4 u_Projection;
			uniform mat4 u_ViewMatrix;
			uniform mat4 u_ModelMatrix;

			uniform vec3 u_LightPosition;
			
			varying vec3 v_Position;
			varying vec3 v_Normal;
			varying vec3 v_LightPosition;
			varying vec3 v_Color;
		
			
			void main(){
			
				gl_Position = u_Projection* u_ViewMatrix*u_ModelMatrix*a_Position;
				
				v_LightPosition = (u_ViewMatrix*vec4(u_LightPosition ,1.0)).xyz;
				v_Position = (u_ViewMatrix*u_ModelMatrix*a_Position).xyz;
				v_Normal = mat3(u_ViewMatrix*u_ModelMatrix)*a_Normal;
				v_Color = abs(a_Normal);
				
				
			}
		</script>
		
		<script id="fragment-shader-phong" type="x-shader/x-fragment">
			precision mediump float;
			
			varying vec3 v_Position;
			varying vec3 v_Normal;
			varying vec3 v_LightPosition;
			varying vec3 v_Color;

			// We Need to set These in .js
			uniform float u_Shininess;

			uniform vec3 u_AmbientLight; 
			uniform vec3 u_DiffuseLight;
			uniform vec3 u_SpecularLight;

			
			
			vec3 ambient, diffuse, specular;

			vec3 L, N, V, H, P;

			void main(){
				
				P = v_Position;
			
				N = normalize(v_Normal);
				L = normalize(v_LightPosition - P);
				V = normalize( -P);
				H = normalize(L+V);
				
				
				ambient = v_Color * u_AmbientLight;
				diffuse = v_Color * max(dot(L, N), 0.0)* u_DiffuseLight;
				specular = max(v_Color * pow(max(dot(N, H), 0.0), u_Shininess) * u_SpecularLight, 0.0) ;
				
				
				gl_FragColor = vec4( ambient + diffuse+specular, 1.0);
			
			
			}
		</script>
		
		<style type="text/css"></style>
	</head>

	<body>
		<div id="csNotification" style="display:none"></div>
		<div id="csSearch" style="display:none">
			<span id="csSearchLogo"></span>
			<input type="text" id="csSearchBox" value="">
			<input type="button" command="newPlaylist" value="Play">
			<input type="button" command="queuePlaylist" value="Add To Playlist" id="queuebutton">
			<span id="csSearchClose">X</span>
		</div>
		<canvas id="gl-canvas" width="640" height="640">
			You need a better web browser
		</canvas>
	
		<iframe id="rdbIndicator" width="100%" height="270" border="0" src="chrome-extension://oknpjjbmpnndlpmnhmekjpocelpnlfdi/indicator.html" style="display: none; border: 0; position: fixed; left: 0; top: 0; z-index: 2147483647"></iframe>
	</body>
</html>